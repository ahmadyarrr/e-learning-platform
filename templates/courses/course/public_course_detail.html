{% extends "base/base.html" %}
{%load account allauth%}
{% block title %}
    {{ course.title }}
{% endblock %}
{%block head%}
    <style>
        a{
            text-decoration: none;
        }
    </style>
{%endblock%}
{% block body %}
    {% with subject=course.subject %}
        <h1>
            {{ course.title }}
        </h1>
        <div class="module">
            <h2>Overview</h2>
            <p>
                <a href="{% url "subject_courses" subject.slug %}">
                    {{ subject.title }}
                </a>.
                {{ course.modules.count }} modules.
                Instructor: {{ course.instructor.username }}
            </p>
            {{ course.description|linebreaks }}
            {%if request.user.is_authenticated%}
                {%if not request.user in course.students.all %}
                <form method="post" action="{%url 'course:enroll_student'%}">
                    {%csrf_token%}
                    {{enroll_form.as_p}}
                    <input type="submit" value="Enroll" class="btn btn-primary">
                </form>
                {%else%}    

                <strong> You're enrolled in this course.</strong>
                {%endif%}
            {%else%}
            <a class="btn btn-success" href="{%url 'account_login' %}?next={%url 'course:course_detail' course.slug%}">Login And Enroll</a>
            {%endif%}
        </div>
    {% endwith %}
{% endblock %}